<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Love WangMiao</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href='https://fonts.loli.net/css?family=Work+Sans:400,300,600,400italic,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.loli.net/css?family=Sacramento' rel='stylesheet'>

    <!-- Animate.css -->
    <link rel='stylesheet' href='css/animate.css'>
    
    <!-- Bootstrap  -->
    <link rel='stylesheet' href='https://cdn.bootcss.com/twitter-bootstrap/3.3.5/css/bootstrap.min.css'>

    <!-- Theme style  -->
    <link rel='stylesheet' href='css/style.css'>

    <!-- Modernizr JS -->
    <script src='https://cdn.bootcss.com/modernizr/2.6.2/modernizr.min.js'></script>
</head>

<body>

    <div class='lovewangmiao-loader'></div>

    <div id='page'>
        <nav class='lovewangmiao-nav' role='navigation'>
            <div class='container'>
                <div class='row'>
                    <div class='col-xs-3'>
                        <div id='lovewangmiao-logo'><a href='index.html'>Love you<strong>.</strong></a></div>
                    </div>
                    <div class='col-xs-9 text-right menu-1'>
                        <ul>
                            <li class='active'><a href='index.html'>Home</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <div id='lovewangmiao-started' class='lovewangmiao-bg' style='background-image:url("https://ws1.sinaimg.cn/large/006tNbRwly1fxvyngrj5mj31400u04qr.jpg");'>
            <div class='overlay'></div>
            <div class='container'>
                <div class='row animate-box'>
                    <div class='col-md-8 col-md-offset-2 text-center lovewangmiao-heading'>
                        <h2>Login</h2>
                        <p>Only my sweetheart can login</p>
                    </div>
                </div>
                <div class='row animate-box'>
                    <div class='col-md-10 col-md-offset-1'>
                        <form class='form-inline'>
                            <div class='col-md-4 col-sm-4'>
                                <div class='form-group'>
                                    <label for='username' class='sr-only'>Username</label>
                                    <input type='username' class='form-control' id='username' placeholder='Username'>
                                </div>
                            </div>
                            <div class='col-md-4 col-sm-4'>
                                <div class='form-group'>
                                    <label for='password' class='sr-only'>Password</label>
                                    <input type='password' class='form-control' id='password' placeholder='Password'>
                                </div>
                            </div>
                            <div class='col-md-4 col-sm-4'>
                                <button id='login-btn' type='button' class='btn btn-default btn-block'>Login</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src='https://cdn.bootcss.com/jquery/2.1.4/jquery.min.js'></script>

    <!-- jQuery Easing -->
    <script src='https://cdn.bootcss.com/jquery-easing/1.3/jquery.easing.min.js'></script>

    <!-- Bootstrap -->
    <script src='https://cdn.bootcss.com/twitter-bootstrap/3.3.5/js/bootstrap.min.js'></script>

    <!-- Waypoints -->
    <script src='https://cdn.bootcss.com/waypoints/4.0.0/jquery.waypoints.min.js'></script>

    <!-- countTo -->
    <script src='https://cdn.bootcss.com/jquery-countto/1.2.0/jquery.countTo.js'></script>

    <!-- Stellar -->
    <script src='https://cdn.bootcss.com/stellar.js/0.6.2/jquery.stellar.min.js'></script>
    <!-- Magnific Popup -->
    <script src='https://cdn.bootcss.com/magnific-popup.js/0.9.9/jquery.magnific-popup.min.js'></script>
    <script src='js/magnific-popup-options.js'></script>

    <!-- Main -->
    <script src='js/main.js'></script>

    <script src='js/heart.js'></script>


    <script>
        autoheight();
        function autoheight() {
            var winHeight = 0;
            if (window.innerHeight)
                winHeight = window.innerHeight;
            else if ((document.body) && (document.body.clientHeight))
                winHeight = document.body.clientHeight;
            if (document.documentElement && document.documentElement.clientHeight)
                winHeight = document.documentElement.clientHeight;
            document.getElementById('lovewangmiao-started').style.height = winHeight + 'px';
        }
        window.onresize = autoheight;

        $('#login-btn').click(function () {
            var username = $('#username').val();
            var password = $('#password').val();
            $.ajax({
                url: '/api/accounts/login',
                type: 'POST',
                data: {
                    'csrfmiddlewaretoken': csrf_token,
                    'username': username,
                    'password': password,
                },

                success: function (json) {
                    window.location.href = '/';
                },

                error: function (json) {
                    alert(json['msg']);
                }
            });
        });

        $(document).ready(function () {
			$.ajax({
				url: '/api/utils/csrf_token',
				type: 'GET',

				success: function (json) {
                    window.csrf_token = json['csrf_token'];
				},

				error: function (json) {
					console.log(json);
                    window.location.href = '/';
				}
			});
		});
    </script>

</body>

</html>
